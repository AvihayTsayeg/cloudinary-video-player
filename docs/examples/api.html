<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

  <title>Cloudinary Video Player</title>

  <link href="/cld-video-player.css" rel="stylesheet">

  <!-- Cloudinary Video Player Dependencies -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/cloudinary-core/2.3.0/cloudinary-core-shrinkwrap.js"></script>
  <script type="text/javascript" src="/cld-video-player.js"></script>

</head>
<body>

    <div class="container p-4">
      <nav class="nav mb-2">
          <a href="index.html"><< Back to examples index</a>
      </nav>
      <h1>Cloudinary Video Player</h1>
      <h3 class="mb-4">API and Events</h3>

      <div class="video-container">
        
        <video
          id="example-player"
          controls
          muted
          class="cld-video-player cld-video-player-skin-dark"
          width="600">
        </video>

        <div class="mt-4">
          <div class="btn-group">
            <button id="vid-seek-minus" class="btn btn-outline-primary mb-2">-10 seconds</button>
            <button id="vid-seek-plus" class="btn btn-outline-primary border-primary mb-2">+10 seconds</button>
          </div>
          <div class="btn-group">
            <button id="vid-play-prev" class="btn btn-outline-primary mb-2">Previous</button>
            <button id="vid-play-next" class="btn btn-outline-primary mb-2">Next</button>
            <button id="vid-play" class="btn btn-outline-primary mb-2">Play</button>
            <button id="vid-pause" class="btn btn-outline-primary mb-2">Pause</button>
            <button id="vid-stop" class="btn btn-outline-primary mb-2">Stop</button>
          </div>
        </div>
        <div>
          <div class="btn-group">
            <button id="vid-maximize" class="btn btn-outline-primary mb-2">Maximize</button>
            <button id="vid-toggle-controls" class="btn btn-outline-primary mb-2">Toggle Controls</button>
          </div>
          <div class="btn-group">
            <button id="vid-mute" class="btn btn-outline-primary mb-2">Mute</button>
            <button id="vid-unmute" class="btn btn-outline-primary mb-2">Unmute</button>
            <button id="vid-volume-minus" class="btn btn-outline-primary mb-2">Volume -10%</button>
            <button id="vid-volume-plus" class="btn btn-outline-primary mb-2">Volume +10%</button>
          </div>
        </div>

    </div>

    <p class="mt-4">
      <a href="https://cloudinary.com/documentation/cloudinary_video_player">Full documentation (needs anchor)</a>
    </p>

    <h3 class="mt-4">Example Code:</h3>

    <pre><code class="language-html">

      &lt;video
        id="example-player"
        controls
        muted
        class="cld-video-player cld-video-player-skin-dark"
        width="600"&gt;
      &lt;/video&gt;

    </code>

      <code class="language-javascript">
      var cld = cloudinary.Cloudinary.new({ cloud_name: 'miki-cloudinary' });

      // Initialize player with base transformation (applies to all transformations)
      var player = cld.videoPlayer('example-player', {
        transformation: {
          overlay: "text:arial_60:Example",
          gravity: "north_west",
          x: 20,
          y: 20,
          start_offset: 3,
          end_offset: 10,
          color: 'red',
          width: 600,
          crop: 'limit'
        },
        posterOptions: {
          transformation: { effect: ['sepia'] }
        }
      });

      // Button 'click' event handlers
      document.querySelector("#vid-seek-minus").addEventListener('click', function() {
        player.currentTime(player.currentTime() - 10);
      });

      document.querySelector("#vid-seek-plus").addEventListener('click', function() {
        player.currentTime(player.currentTime() + 10);
      });

      document.querySelector("#vid-play-prev").addEventListener('click', function() {
        player.playPrevious();
      });

      document.querySelector("#vid-play").addEventListener('click', function() {
        player.play();
      });

      document.querySelector("#vid-play-next").addEventListener('click', function() {
        player.playNext();
      });

      document.querySelector("#vid-pause").addEventListener('click', function() {
        player.pause();
      });

      document.querySelector("#vid-stop").addEventListener('click', function() {
        player.stop();
      });

      document.querySelector("#vid-mute").addEventListener('click', function() {
        player.mute();
      });

      document.querySelector("#vid-unmute").addEventListener('click', function() {
        player.unmute();
      });

      document.querySelector("#vid-volume-minus").addEventListener('click', function() {
        player.volume(player.volume() - 0.1);
      });

      document.querySelector("#vid-volume-plus").addEventListener('click', function() {
        player.volume(player.volume() + 0.1);
      });

      document.querySelector("#vid-maximize").addEventListener('click', function() {
        player.maximize();
      });

      document.querySelector("#vid-toggle-controls").addEventListener('click', function() {
        player.controls(!player.controls());
      });

      // Register to some video player events
      var eventTypes = ['play', 'pause', 'volumechange', 'mute', 'unmute', 'fullscreenchange',
        'seek', 'sourcechanged', 'percentsplayed', 'ended'];

      var eventsDiv = document.querySelector('#vid-events');
      eventTypes.forEach(function(eventType) {
        player.on(eventType, function(event) {
          var eventStr = eventType;
          if (event.eventData) {
            eventStr = eventStr + ": " + JSON.stringify(event.eventData);
          }
          var text = document.createTextNode(eventStr);
          var textDiv = document.createElement('div');
          textDiv.appendChild(text);
          eventsDiv.appendChild(textDiv);
          updateEvents();
        })
      });

      function updateEvents() {
        var eventsDiv = document.querySelector('#vid-events');
        eventsDiv.scrollTop = eventsDiv.scrollHeight;
      }

      // Update source information when source is changed.
      player.on('sourcechanged', function() {
        updateSourceData();
      });

      function updateSourceData() {
        document.querySelector("#vid-source-public-id").innerText = "Public Id: " + player.currentPublicId();
        document.querySelector("#vid-source-url").innerText = "Source URL: " + player.currentSourceUrl();
      }

      // Set player playlist
      player.playlist([
        'oceans',
        'negative',
        'book'
      ], { autoAdvance: 0 }).play();
        </code>
    </pre>
  </div>

  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

  <!-- Bootstrap -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

  <!-- Actual code -->
  <script type="text/javascript">
    var cld = cloudinary.Cloudinary.new({ cloud_name: 'miki-cloudinary' });

    // Initialize player with base transformation (applies to all transformations)
    var player = cld.videoPlayer('example-player', {
      transformation: {
        overlay: "text:arial_60:Example",
        gravity: "north_west",
        x: 20,
        y: 20,
        start_offset: 3,
        end_offset: 10,
        color: 'red',
        width: 600,
        crop: 'limit'
      },
      posterOptions: {
        transformation: { effect: ['sepia'] }
      }
    });

    // Button 'click' event handlers
    document.querySelector("#vid-seek-minus").addEventListener('click', function() {
      player.currentTime(player.currentTime() - 10);
    });

    document.querySelector("#vid-seek-plus").addEventListener('click', function() {
      player.currentTime(player.currentTime() + 10);
    });

    document.querySelector("#vid-play-prev").addEventListener('click', function() {
      player.playPrevious();
    });

    document.querySelector("#vid-play").addEventListener('click', function() {
      player.play();
    });

    document.querySelector("#vid-play-next").addEventListener('click', function() {
      player.playNext();
    });

    document.querySelector("#vid-pause").addEventListener('click', function() {
      player.pause();
    });

    document.querySelector("#vid-stop").addEventListener('click', function() {
      player.stop();
    });

    document.querySelector("#vid-mute").addEventListener('click', function() {
      player.mute();
    });

    document.querySelector("#vid-unmute").addEventListener('click', function() {
      player.unmute();
    });

    document.querySelector("#vid-volume-minus").addEventListener('click', function() {
      player.volume(player.volume() - 0.1);
    });

    document.querySelector("#vid-volume-plus").addEventListener('click', function() {
      player.volume(player.volume() + 0.1);
    });

    document.querySelector("#vid-maximize").addEventListener('click', function() {
      player.maximize();
    });

    document.querySelector("#vid-toggle-controls").addEventListener('click', function() {
      player.controls(!player.controls());
    });

    // Register to some video player events
    var eventTypes = ['play', 'pause', 'volumechange', 'mute', 'unmute', 'fullscreenchange',
      'seek', 'sourcechanged', 'percentsplayed', 'ended'];

    var eventsDiv = document.querySelector('#vid-events');
    eventTypes.forEach(function(eventType) {
      player.on(eventType, function(event) {
        var eventStr = eventType;
        if (event.eventData) {
          eventStr = eventStr + ": " + JSON.stringify(event.eventData);
        }
        var text = document.createTextNode(eventStr);
        var textDiv = document.createElement('div');
        textDiv.appendChild(text);
        eventsDiv.appendChild(textDiv);
        updateEvents();
      })
    });

    function updateEvents() {
      var eventsDiv = document.querySelector('#vid-events');
      eventsDiv.scrollTop = eventsDiv.scrollHeight;
    }

    // Update source information when source is changed.
    player.on('sourcechanged', function() {
      updateSourceData();
    });

    function updateSourceData() {
      document.querySelector("#vid-source-public-id").innerText = "Public Id: " + player.currentPublicId();
      document.querySelector("#vid-source-url").innerText = "Source URL: " + player.currentSourceUrl();
    }

    // Set player playlist
    player.playlist([
      'oceans',
      'negative',
      'book'
    ], { autoAdvance: 0 }).play();
  </script>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-light.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

</body>
</html>


